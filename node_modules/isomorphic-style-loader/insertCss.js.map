{"version":3,"file":"insertCss.js","sources":["src/insertCss.js"],"sourcesContent":["/**\n * Isomorphic CSS style loader for Webpack\n *\n * Copyright Â© 2015-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nconst inserted = {}\n\n// Base64 encoding and decoding - The \"Unicode Problem\"\n// https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\nfunction b64EncodeUnicode(str) {\n  return btoa(\n    encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) =>\n      String.fromCharCode(`0x${p1}`),\n    ),\n  )\n}\n\n/**\n * Remove style/link elements for specified node IDs\n * if they are no longer referenced by UI components.\n */\nfunction removeCss(ids) {\n  ids.forEach((id) => {\n    if (--inserted[id] <= 0) {\n      const elem = document.getElementById(id)\n      if (elem) {\n        elem.parentNode.removeChild(elem)\n      }\n    }\n  })\n}\n\n/**\n * Example:\n *   // Insert CSS styles object generated by `css-loader` into DOM\n *   var removeCss = insertCss([[1, 'body { color: red; }']]);\n *\n *   // Remove it from the DOM\n *   removeCss();\n */\nfunction insertCss(styles, { replace = false, prepend = false, prefix = 's' } = {}) {\n  const ids = []\n  for (let i = 0; i < styles.length; i++) {\n    const [moduleId, css, media, sourceMap] = styles[i]\n    const id = `${prefix}${moduleId}-${i}`\n\n    ids.push(id)\n\n    if (inserted[id]) {\n      if (!replace) {\n        inserted[id]++\n        continue\n      }\n    }\n\n    inserted[id] = 1\n\n    let elem = document.getElementById(id)\n    let create = false\n\n    if (!elem) {\n      create = true\n\n      elem = document.createElement('style')\n      elem.setAttribute('type', 'text/css')\n      elem.id = id\n\n      if (media) {\n        elem.setAttribute('media', media)\n      }\n    }\n\n    let cssText = css\n    if (sourceMap && typeof btoa === 'function') {\n      // skip IE9 and below, see http://caniuse.com/atob-btoa\n      cssText += `\\n/*# sourceMappingURL=data:application/json;base64,${b64EncodeUnicode(\n        JSON.stringify(sourceMap),\n      )}*/`\n      cssText += `\\n/*# sourceURL=${sourceMap.file}?${id}*/`\n    }\n\n    if ('textContent' in elem) {\n      elem.textContent = cssText\n    } else {\n      elem.styleSheet.cssText = cssText\n    }\n\n    if (create) {\n      if (prepend) {\n        document.head.insertBefore(elem, document.head.childNodes[0])\n      } else {\n        document.head.appendChild(elem)\n      }\n    }\n  }\n\n  return removeCss.bind(null, ids)\n}\n\nmodule.exports = insertCss\n"],"names":["inserted","b64EncodeUnicode","str","btoa","encodeURIComponent","replace","match","p1","String","fromCharCode","removeCss","ids","forEach","id","elem","document","getElementById","parentNode","removeChild","insertCss","styles","prepend","prefix","i","length","moduleId","css","media","sourceMap","push","create","createElement","setAttribute","cssText","JSON","stringify","file","textContent","styleSheet","head","insertBefore","childNodes","appendChild","bind","module","exports"],"mappings":";;;;AASA,IAAMA,QAAQ,GAAG,EAAjB;;AAIA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;SACtBC,IAAI,CACTC,kBAAkB,CAACF,GAAD,CAAlB,CAAwBG,OAAxB,CAAgC,iBAAhC,EAAmD,UAACC,KAAD,EAAQC,EAAR;WACjDC,MAAM,CAACC,YAAP,QAAyBF,EAAzB,CADiD;GAAnD,CADS,CAAX;;;AAWF,SAASG,SAAT,CAAmBC,GAAnB,EAAwB;EACtBA,GAAG,CAACC,OAAJ,CAAY,UAACC,EAAD,EAAQ;QACd,EAAEb,QAAQ,CAACa,EAAD,CAAV,IAAkB,CAAtB,EAAyB;UACjBC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,EAAxB,CAAb;;UACIC,IAAJ,EAAU;QACRA,IAAI,CAACG,UAAL,CAAgBC,WAAhB,CAA4BJ,IAA5B;;;GAJN;;;AAkBF,SAASK,SAAT,CAAmBC,MAAnB,SAAoF;gCAAJ,EAAI;0BAAvDf,OAAuD;MAAvDA,OAAuD,6BAA7C,KAA6C;0BAAtCgB,OAAsC;MAAtCA,OAAsC,6BAA5B,KAA4B;yBAArBC,MAAqB;MAArBA,MAAqB,4BAAZ,GAAY;;MAC5EX,GAAG,GAAG,EAAZ;;OACK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAAM,CAACI,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;oBACIH,MAAM,CAACG,CAAD,CADV;QAC/BE,QAD+B;QACrBC,GADqB;QAChBC,KADgB;QACTC,SADS;QAEhCf,EAAE,QAAMS,MAAN,GAAeG,QAAf,SAA2BF,CAAnC;IAEAZ,GAAG,CAACkB,IAAJ,CAAShB,EAAT;;QAEIb,QAAQ,CAACa,EAAD,CAAZ,EAAkB;UACZ,CAACR,OAAL,EAAc;QACZL,QAAQ,CAACa,EAAD,CAAR;;;;;IAKJb,QAAQ,CAACa,EAAD,CAAR,GAAe,CAAf;QAEIC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,EAAxB,CAAX;QACIiB,MAAM,GAAG,KAAb;;QAEI,CAAChB,IAAL,EAAW;MACTgB,MAAM,GAAG,IAAT;MAEAhB,IAAI,GAAGC,QAAQ,CAACgB,aAAT,CAAuB,OAAvB,CAAP;MACAjB,IAAI,CAACkB,YAAL,CAAkB,MAAlB,EAA0B,UAA1B;MACAlB,IAAI,CAACD,EAAL,GAAUA,EAAV;;UAEIc,KAAJ,EAAW;QACTb,IAAI,CAACkB,YAAL,CAAkB,OAAlB,EAA2BL,KAA3B;;;;QAIAM,OAAO,GAAGP,GAAd;;QACIE,SAAS,IAAI,OAAOzB,IAAP,KAAgB,UAAjC,EAA6C;MAE3C8B,OAAO,6DAA2DhC,gBAAgB,CAChFiC,IAAI,CAACC,SAAL,CAAeP,SAAf,CADgF,CAA3E,OAAP;MAGAK,OAAO,yBAAuBL,SAAS,CAACQ,IAAjC,SAAyCvB,EAAzC,OAAP;;;QAGE,iBAAiBC,IAArB,EAA2B;MACzBA,IAAI,CAACuB,WAAL,GAAmBJ,OAAnB;KADF,MAEO;MACLnB,IAAI,CAACwB,UAAL,CAAgBL,OAAhB,GAA0BA,OAA1B;;;QAGEH,MAAJ,EAAY;UACNT,OAAJ,EAAa;QACXN,QAAQ,CAACwB,IAAT,CAAcC,YAAd,CAA2B1B,IAA3B,EAAiCC,QAAQ,CAACwB,IAAT,CAAcE,UAAd,CAAyB,CAAzB,CAAjC;OADF,MAEO;QACL1B,QAAQ,CAACwB,IAAT,CAAcG,WAAd,CAA0B5B,IAA1B;;;;;SAKCJ,SAAS,CAACiC,IAAV,CAAe,IAAf,EAAqBhC,GAArB,CAAP;;;AAGFiC,MAAM,CAACC,OAAP,GAAiB1B,SAAjB"}